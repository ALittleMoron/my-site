# TODOs

## Этапы разработки

### ЭТАП 1 (IN PROGRESS) - Минимально жизнеспособный продукт (MVP)

- [ ] Соглашение на использование cookies.
- [ ] Настроить CORS и security headers
- [ ] Поменять nginx на traefik
- [ ] (SEO) Добавить ссылку canonical и schemaMarkUp
- [ ] Провалидировать css (сделать упор на override переменных bootstrap)
- [ ] Перенести bootstrap (и все остальные файлы, по необходимости) в папку со статикой
- [ ] убрать админку, сделать редактирование матрицы компетенций прямо на сайте + базовая авторизация
  и проверка прав на редактирование

### ЭТАП 1.5 (NOT STARTED) - Улучшения MVP, доработка текущего функционала

- [] Проверить оптимизацию сайта
  - [ ] Сделать нагрузочное тестирование (locust)
  - [ ] Проверить сайт через Lighthouse. Поправить ошибки и улучшить показатели
  - [ ] Проверить сайт через PageSpeed Insights. Поправить ошибки и улучшить показатели
- [ ] Сделать закрытое тестирование MVP с реальными пользователями (друзья, коллеги). Собрать фидбек и
  исправить критичные баги.
- [ ] Добавить базовую аналитику (Google Analytics или Matomo) для отслеживания поведения пользователей
  на сайте.
- [ ] Оптимизировать время загрузки страниц (минификация CSS и JS, оптимизация изображений).
- [ ] Перенести матрицу компетенций из google docs в базу данных.

### ЭТАП 2 (NOT STARTED) - Блог и Flashcards

- [ ] Создание карточек из матрицы компетенций (stateless - без сохранения, перезапуск = новый набор
  карточек)
- [ ] Создание самописных карточек
- [ ] экспорт карточек пользователя в .apkg формат

- [ ] Вывод постов по дате публикации
- [ ] Фильтры постов по тэгам и дате
- [ ] Поиск постов по названию и контенту
- [ ] Реакции на посты

### ЭТАП 3 (NOT STARTED) - Доработка матрицы и Курсы

- [ ] Создание шага материала курса (может включать видео, текст, картинки, файлы, тесты)
- [ ] playground для тестов курса
- [ ] Создание курсов, включающих в себя шаги материала курса
- [ ] Привязка курсов к матрице компетенций
- [ ] Просмотр доступных курсов
- [ ] Возможность предложить свой вопрос для матрицы компетенций
- [ ] Возможность отправить информацию об опечатке в матрице компетенций

### ЭТАП 4 (NOT STARTED) - Пользователи

- [ ] Регистрация и аутентификация пользователей (возможно, через OAuth2)
- [ ] Политика конфидекиальности
- [ ] пользовательское соглашение
- [ ] Согласие на обработку персональных данных
- [ ] Восстановление пароля
- [ ] Подтверждение пароля
- [ ] Создание карточек из матрицы компетенций (stateful - сохранение на пользователя)
- [ ] Возможность оставить комментарии к постам в блоге
- [ ] 2FA/MFA для пользователей
- [ ] Профиль пользователя
  - [ ] статистика прохождения курсов
  - [ ] изменение личных данных
  - [ ] настройки уведомлений
  - [ ] просмотр сохранённых карточек flashcards

### ЭТАП 5 (NOT STARTED) - Трасировки и мониторинг

- [ ] Алерты об ошибках в телеграм-бота
- [ ] Подключить Grafana + Prometheus + Loki
- [ ] Подключить сервис мониторинга состояния контейнеров
  - [ ] Слать уведомления при падении контейнеров
  - [ ] Слать уведомления при высоком использовании ресурсов (CPU, RAM)

### ЭТАП 6 (NOT STARTED) - Инфраструктура и Локализация

- [ ] Добавить локализацию в базе данных (возможно, нужна отдельная база под локализации)
- [ ] Добавить Databasus для бэкапа базы данных
- [ ] Добавить выбор локализации на фронте (htmx + hyperscript)
- [ ] VPN для доступа к внутренним системам
- [ ] Подключить dependabot'а к репозиторию
- [ ] Нужно защитить сайт от ботов
- [ ] Вынести миграцию из app_lifespan в отдельную таску (можно в docker-compose)
- [ ] Заменить uvicorn на granian
- [ ] Когда выйдет 3.14, нужно добавить интроспекцию асинхронного лага
  [отсуда](https://docs.python.org/3.14/whatsnew/3.14.html#asyncio-introspection-capabilities)
- [ ] Подключить сервис мониторинга состояния контейнеров
    - [ ] Слать уведомления при падении контейнеров
    - [ ] Слать уведомления при высоком использовании ресурсов (CPU, RAM)

### ЭТАП 7 (NOT STARTED) - Безопасность

- [ ] Dependency scanning (Safety, Bandit)
- [ ] OWASP Top 10 compliance check
- [ ] Возможно, есть AI-агент для поиска уязвимостей в приложении
- [ ] WAF настройка

### ЭТАП 7 (NOT STARTED) - Frontend

- [ ] Перейти на полноценный frontend-framework (angular, скорее всего)
- [ ] Поправить поиск вопросов на фронте: нужно, чтобы удалялись также пустые разделы

## Рефакторинг

- [ ] Упростить BootstrapRenderer
- [ ] Вынести форматтеры полей в адмике в отделньные функции
- [ ] Добавить pre-commit hooks (ruff, mypy, pytest)

## Документация

- [ ] ADR по написанию кода (code quality)