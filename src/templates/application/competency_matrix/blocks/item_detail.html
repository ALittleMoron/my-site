<div id="item-detail-{{ item.id }}"
     class="modal force-display-block"
     style="background-color: rgba(0, 0, 0, 0.5)"
     _="on load hljs.highlightAll()">
    <div class="modal-dialog modal-dialog-centered modal-lg justify-content-center">
        <div class="modal-content" style="z-index: 1066">
            <div class="modal-header">
                <button type="button"
                        class="btn-close"
                        aria-label="Close"
                        _="on click remove #item-detail-{{ item.id }}"></button>
            </div>
            <div class="modal-body">
                <h2>Вопрос:</h2>
                <p>{{ item.question }}</p>
                <hr>
                <h2>Ответ:</h2>
                <p>{{ markdown_to_html(item.answer) |safe }}</p>
                <hr>
                <h2>Ответ, который ожидается на собеседовании:</h2>
                <p>{{ markdown_to_html(item.interview_expected_answer) |safe }}</p>
                {% if resources %}
                    <hr>
                    <h2>Внешние ресурсы:</h2>
                    <ul class="list-unstyled">
                        {% for resource in item.resources %}
                            <li class="mt-2">
                                <span>
                                    <a class="p-0 text-body-secondary link-active" href="{{ resource.url }}">{{ resource.name }}</a>
                                    <p>{{ markdown_to_html(resource.context) |safe }}</p>
                                </span>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
            {% if request.user.is_admin %}
                <div class="modal-footer">
                    {% if item.publish_status == 'Published' %}
                        <button class="btn button-inactive"
                                hx-post="{{ url_for('competency-matrix-item-set-draft-api-handler', pk=item.id) }}"
                                _="on htmx:afterRequest if event.detail.xhr.status is 204 remove #item-detail-{{ item.id }} then trigger click on #matrix-item-{{ item.id }} end end">
                            В черновик
                        </button>
                    {% elif item.publish_status == 'Draft' %}
                        <button class="btn button-inactive"
                                hx-post="{{ url_for('competency-matrix-item-set-published-api-handler', pk=item.id) }}"
                                _="on htmx:afterRequest if event.detail.xhr.status is 204 remove #item-detail-{{ item.id }} then trigger click on #matrix-item-{{ item.id }} end end">
                            Опубликовать
                        </button>
                    {% endif %}
                    <button class="btn button-inactive">Отредактировать</button>
                    <button class="btn btn-danger"
                            hx-delete="{{ url_for('competency-matrix-item-delete-api-handler', pk=item.id) }}"
                            hx-vals="js:{onlyPublished: (localStorage.getItem('allChosen') === 'true' ? 'false' : 'true')}"
                            _="on htmx:afterRequest if event.detail.xhr.status is 204 remove #item-detail-{{ item.id }} then reload() the location of the window end">
                        Удалить
                    </button>
                </div>
            {% endif %}
        </div>
    </div>
</div>
