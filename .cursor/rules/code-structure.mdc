---
alwaysApply: true
---

# Организация кода

- Слои не должны нарушать границы: Core не зависит ни от чего. DB зависит только от Core-схем. Entrypoints зависят от Core и используют DI.
- Один домен — одна папка: Вся логика домена (schemas, use_cases, storages, exceptions) находится в одной папке src/core/{domain}/.
- Абстракции в Core, реализации в отдельной папке по типу сущности: Интерфейсы Storage определяются в src/core/{domain}/storages.py, реализации в src/db/storages/{domain}.py.
- Провайдеры по доменам: Каждый домен имеет свой Provider в src/ioc/providers/{domain}_provider.py.
- Конвертация схем разных слоев не нарушает границы: Core не умеет конвертируется ни во что; модели БД, схемы АПИ и другие умеют конвертироваться к core по необходимости